# Audit Log - Landing Page - 2025-01-16 16:26:00

## Prompt Summary
User reported 404 errors when accessing the `/api/users/count` endpoint at `http://localhost:3000/api/users/count/`.

## Actions Taken
1. Investigated API route structure and file locations
2. Verified route file exists at correct path (`src/app/api/users/count/route.ts`)
3. Checked dev server status - found it was running on port 3001 instead of 3000
4. Discovered root cause: Next.js config had `output: 'export'` which disables API routes
5. Fixed Next.js configuration by removing static export mode
6. Restarted dev server on correct port
7. Successfully tested API endpoint

## Files Changed
- `/next.config.js` - Removed `output: 'export'` and `trailingSlash: true` settings

## Components/Features Affected
- API route functionality (all API routes)
- User count endpoint
- Social proof component data fetching

## Root Cause Analysis
The Next.js configuration file had `output: 'export'` which creates a static-only build. Static exports don't support API routes - they're designed for client-side only applications. This setting effectively disabled all API route functionality, causing 404 errors.

Additionally, `trailingSlash: true` was causing routing complications with API endpoints.

## Testing Considerations
- Verify all API routes work in development
- Test production build to ensure API routes are included
- Check that dynamic features requiring server-side functionality work
- Ensure deployment configuration supports Node.js runtime (not static hosting)

## Performance Impact
- Application now requires Node.js runtime (can't be deployed as static site)
- API routes enable server-side functionality
- Improved flexibility for future features requiring server-side logic

## Next Steps
- Update deployment configuration if currently using static hosting
- Consider implementing proper error handling for API routes
- Add API route tests to prevent regression
- Document that this app requires Node.js hosting, not static hosting

## Notes
**Important Configuration Change**: The application was previously configured for static export only. By removing `output: 'export'`, the app now requires a Node.js server to run (Vercel, Railway, etc.) and cannot be deployed to static hosting services (GitHub Pages, Netlify static, etc.).

The API endpoint now correctly returns JSON responses:
- Without trailing slash: `http://localhost:3000/api/users/count` ✅
- With trailing slash: Redirects to non-trailing slash version ✅

## Timestamp
Created: 2025-01-16 16:26:00
Page Section: api/infrastructure